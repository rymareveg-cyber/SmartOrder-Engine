# ๐ค SmartOrder Engine

<div align="center">

**ะะฝัะตะปะปะตะบััะฐะปัะฝะฐั ัะธััะตะผะฐ ะฐะฒัะพะผะฐัะธัะตัะบะพะน ะพะฑัะฐะฑะพัะบะธ ะทะฐะบะฐะทะพะฒ**  
ั AI-ะฟะฐััะธะฝะณะพะผ, ะธะฝัะตะณัะฐัะธะตะน 1ะก:ะฃะะค, ะพะผะฝะธะบะฐะฝะฐะปัะฝะพัััั ะธ ะพะฝะปะฐะนะฝ-ะพะฟะปะฐัะพะน

[![Python](https://img.shields.io/badge/Python-3.11+-blue)](https://python.org)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104-green)](https://fastapi.tiangolo.com)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-14+-blue)](https://postgresql.org)
[![Redis](https://img.shields.io/badge/Redis-7+-red)](https://redis.io)
[![OpenAI](https://img.shields.io/badge/GPT--4.1--mini-AI%20Powered-purple)](https://openai.com)

</div>

---

## โจ ะงัะพ ัะผะตะตั SmartOrder Engine

SmartOrder Engine โ ััะพ ัะผะฝะฐั ะพะผะฝะธะบะฐะฝะฐะปัะฝะฐั ัะธััะตะผะฐ, ะบะพัะพัะฐั ะฟัะธะฝะธะผะฐะตั ะทะฐะบะฐะทั ะฒ **ัะฒะพะฑะพะดะฝะพะน ัะตะบััะพะฒะพะน ัะพัะผะต** ัะตัะตะท Telegram ะธ ะฏะฝะดะตะบั.ะะพััั, ะพะฑัะฐะฑะฐััะฒะฐะตั ะธั ั ะฟะพะผะพััั **GPT-4**, ะทะฐะดะฐัั ััะพัะฝัััะธะต ะฒะพะฟัะพัั, ะฒัััะฐะฒะปัะตั PDF-ัััั, ะพะฑัะฐะฑะฐััะฒะฐะตั ะพะฝะปะฐะนะฝ-ะพะฟะปะฐัั ะธ ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐัั ะดะพะบัะผะตะฝัั ะฒ **1ะก:ะฃะฟัะฐะฒะปะตะฝะธะต ะฝะฐัะตะน ัะธัะผะพะน**.

### ะะพะปะฝัะน ัะธะบะป ะทะฐ 60 ัะตะบัะฝะด:

```
ะะปะธะตะฝั ะฟะธัะตั:  "ะฅะพัั 2 iPhone ั ะดะพััะฐะฒะบะพะน ะฒ ะะพัะบะฒั, ัะป. ะะตะฝะธะฝะฐ, ะด.15"
                                    โ
                                    โผ
              ๐ค GPT-4 ัะฐะทะฑะธัะฐะตั ัะตะบัั, ะฝะฐัะพะดะธั ัะพะฒะฐั ะฒ ะบะฐัะฐะปะพะณะต
                                    โ
              โ ะัะปะธ ะฝะตั ะคะะ/ัะตะปะตัะพะฝะฐ โ ะทะฐะดะฐัั ััะพัะฝัััะธะน ะฒะพะฟัะพั
                                    โ
              ๐ ะะตะฝะตัะธััะตั ะบัะฐัะธะฒัะน PDF-ัััั ั ัะตะฝะฐะผะธ ะธะท 1ะก
                                    โ
              ๐ณ ะัะฟัะฐะฒะปัะตั ัััะปะบั ะฝะฐ ะพะฟะปะฐัั (Telegram + Email)
                                    โ
              โ ะะพัะปะต ะพะฟะปะฐัั โ ัััั ะฒ 1ะก + ััะตะบ-ะฝะพะผะตั + ัะฒะตะดะพะผะปะตะฝะธะต
```

---

## ๐ฏ ะะปััะตะฒัะต ะฒะพะทะผะพะถะฝะพััะธ

| ะะพะทะผะพะถะฝะพััั | ะะฟะธัะฐะฝะธะต |
|------------|----------|
| ๐ง **AI-ะฟะฐััะธะฝะณ** | GPT-4.1-mini ะฟะพะฝะธะผะฐะตั ะทะฐะบะฐะท ะฒ ัะฒะพะฑะพะดะฝะพะน ัะพัะผะต ะฝะฐ ััััะบะพะผ ัะทัะบะต |
| ๐ฆ **Fuzzy matching** | ะะฐัะพะดะธั ัะพะฒะฐั ะดะฐะถะต ั ะพะฟะตัะฐัะบะฐะผะธ ะธ ะฝะตัะพัะฝัะผะธ ะฝะฐะทะฒะฐะฝะธัะผะธ |
| ๐ฌ **Telegram ะฑะพั** | ะัะธะฝะธะผะฐะตั ะทะฐะบะฐะทั, ะทะฐะดะฐัั ะฒะพะฟัะพัั, ะพัะฟัะฐะฒะปัะตั ัััั ะธ ััะตะบ-ะฝะพะผะตั |
| ๐ง **ะฏะฝะดะตะบั.ะะพััะฐ** | ะะพะปะฝะพัะตะฝะฝัะน email-ะบะฐะฝะฐะป ั HTML-ะฟะธััะผะฐะผะธ ะธ PDF-ะฒะปะพะถะตะฝะธะตะผ |
| ๐ **ะฃะผะฝัะต ััะพัะฝะตะฝะธั** | ะะพะฝัะตะบัั ัะพััะฐะฝัะตััั ะฒ Redis โ ะพัะฒะตั ะพะฑะฝะพะฒะปัะตั ัะพั ะถะต ะทะฐะบะฐะท |
| ๐ฐ **ะะฝะปะฐะนะฝ-ะพะฟะปะฐัะฐ** | ะกััะฐะฝะธัะฐ ะพะฟะปะฐัั ั ัะพัะผะพะน ะบะฐััั, ัะฐะฑะพัะฐะตั ะฝะฐ ะปัะฑะพะผ ััััะพะนััะฒะต |
| ๐ **1ะก:ะฃะะค** | ะกะธะฝััะพะฝะธะทะฐัะธั ะบะฐัะฐะปะพะณะฐ + ะฐะฒัะพะผะฐัะธัะตัะบะธะน ัะบัะฟะพัั ััััะฐ ะฟะพัะปะต ะพะฟะปะฐัั |
| ๐ **Dashboard** | ะะตะฑ-ะธะฝัะตััะตะนั ะผะตะฝะตะดะถะตัะฐ: ััะฐัะธััะธะบะฐ, ะทะฐะบะฐะทั, ัะบัะฟะพัั ะฒ Excel |
| ๐ **ะัะตัะตะดั Redis** | ะะฐะดัะถะฝะฐั ะฐัะธะฝััะพะฝะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ะดะพ 10 ะทะฐะบะฐะทะพะฒ ะพะดะฝะพะฒัะตะผะตะฝะฝะพ |
| ๐ก๏ธ **ะัะบะฐะทะพัััะพะนัะธะฒะพััั** | Circuit Breaker, Retry, Dead Letter Queue, ะฐะฒัะพะฟะตัะตะทะฐะฟััะบ |

---

## ๐ ะะธะทะฝะตะฝะฝัะน ัะธะบะป ะทะฐะบะฐะทะฐ

```
  โโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ
  โ  new    โโโโโถโ  validated  โโโโโถโ invoice_created  โ
  โ ะะพะฒัะน   โ    โ ะะพะดัะฒะตัะถะดัะฝ โ    โ  ะกััั ัะพะทะดะฐะฝ     โ
  โโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ
                                              โ
                                              โผ
  โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโ    โโโโโโโโโโโ
  โ  tracking_issued โโโโโโorder_โโโโโโ  paid   โ
  โ    ะัะฟัะฐะฒะปะตะฝ     โ    โ1c    โ    โ ะะฟะปะฐัะตะฝ โ
  โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโ    โโโโโโโโโโโ
```

| ะกัะฐััั | ะัััะบะพะต ะฝะฐะทะฒะฐะฝะธะต | ะงัะพ ะฟัะพะธััะพะดะธั |
|--------|-----------------|----------------|
| `new` | ะะพะฒัะน | ะะฐะบะฐะท ัะพะทะดะฐะฝ ะธะท ะพัะตัะตะดะธ |
| `validated` | ะะพะดัะฒะตัะถะดัะฝ | AI ัะพะฑัะฐะป ะฒัะต ะดะฐะฝะฝัะต ะบะปะธะตะฝัะฐ |
| `invoice_created` | ะกััั ัะพะทะดะฐะฝ | PDF ััะพัะผะธัะพะฒะฐะฝ, ัััะปะบะฐ ะฝะฐ ะพะฟะปะฐัั ะพัะฟัะฐะฒะปะตะฝะฐ |
| `paid` | ะะฟะปะฐัะตะฝ | ะะปะธะตะฝั ะพะฟะปะฐัะธะป (ัะตััะพะฒะฐั ะบะฐััะฐ) |
| `order_created_1c` | ะ 1ะก | ะกััั ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐะฝ ะฒ 1ะก:ะฃะะค |
| `tracking_issued` | ะัะฟัะฐะฒะปะตะฝ | ะขัะตะบ-ะฝะพะผะตั ะฒัะดะฐะฝ ะธ ะพัะฟัะฐะฒะปะตะฝ ะบะปะธะตะฝัั |

---

## ๐๏ธ ะััะธัะตะบัััะฐ

```
  ะะฅะะะะซะ ะะะะะะซ           ะะงะะะะะฌ          ะะะะะะะขะะ              ะะซะฅะะะซ
  โโโโโโโโโโโโโโ           โโโโโโโ          โโโโโโโโโ              โโโโโโ

  ๐ฑ Telegram Bot  โโโ
  ๐ง ะฏะฝะดะตะบั.ะะพััะฐ  โโโผโโโถ Redis Queue โโโถ Queue Processor โโโถ AI Parser (GPT-4)
  ๐ ะฏะฝะดะตะบั.ะคะพัะผั  โโโ    orders:queue         โ                    โ
                                               โ             PostgreSQL DB
                                               โ                    โ
                                    โโโโโโโโโโโโผโโโโโโโโโโโ         โ
                                    โผ          โผ          โผ         โ
                              Telegram      Email      Invoice โโโโโโ
                              Bot (ัะฒะตะดะพะผ.) Notifier   PDF Gen
                                    โ          โ          โ
                                    โโโโโโโโโโโโดโโโโโโโโโโโ
                                                  โ
                                           Payment Page โโโถ 1C Exporter โโโถ Tracking
                                           (8029/pay/token)  (PATCH paid)    Generator
```

### ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
SmartOrder Engine/
โโโ start_all.py                    # ๐ ะะฐะฟััะบ ะฒัะตั ัะตัะฒะธัะพะฒ
โโโ requirements.txt
โโโ env.example                     # ะัะธะผะตั ะฝะฐัััะพะตะบ
โโโ database/
โ   โโโ migrations/
โ       โโโ 001_schema.sql          # ะกัะตะผะฐ ะะ (ัะฐะฑะปะธัั, ััะธะณะณะตัั)
โ       โโโ 002_indexes.sql         # ะะฝะดะตะบัั (ะฒะบะปััะฐั pg_trgm)
โโโ src/
โ   โโโ config.py                   # ะฆะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะฐั ะบะพะฝัะธะณััะฐัะธั
โ   โโโ utils/
โ   โ   โโโ logger.py               # ะะพะณะธัะพะฒะฐะฝะธะต ั ัะพัะฐัะธะตะน
โ   โ   โโโ redis_client.py         # Redis ะบะปะธะตะฝั + ะพัะตัะตะดั
โ   โ   โโโ retry.py                # Retry + Circuit Breaker
โ   โโโ database/
โ   โ   โโโ pool.py                 # Thread-safe PostgreSQL ะฟัะป
โ   โโโ services/
โ   โ   โโโ ai_parser.py            # ๐ง GPT-4 ะฟะฐััะธะฝะณ ะทะฐะบะฐะทะพะฒ
โ   โ   โโโ catalog_matcher.py      # Fuzzy matching ัะพะฒะฐัะพะฒ
โ   โ   โโโ catalog_sync.py         # ะกะธะฝััะพะฝะธะทะฐัะธั ะบะฐัะฐะปะพะณะฐ ะธะท 1ะก
โ   โ   โโโ delivery_calculator.py  # ะะฐัััั ััะพะธะผะพััะธ ะดะพััะฐะฒะบะธ
โ   โ   โโโ email_notifier.py       # ๐ง Email ัะฒะตะดะพะผะปะตะฝะธั (SMTP)
โ   โ   โโโ invoice_generator.py    # ๐ ะะตะฝะตัะฐัะธั PDF ััััะพะฒ
โ   โ   โโโ mail_parser.py          # ะะฐััะตั ะฏะฝะดะตะบั.ะะพััั (IMAP)
โ   โ   โโโ onec_exporter.py        # ะญะบัะฟะพัั ััััะพะฒ ะฒ 1ะก:ะฃะะค
โ   โ   โโโ order_service.py        # CRUD ะทะฐะบะฐะทะพะฒ + Pydantic ะผะพะดะตะปะธ
โ   โ   โโโ payment_processor.py    # ๐ณ ะะฑัะฐะฑะพัะบะฐ ะพะฟะปะฐัั
โ   โ   โโโ prompt_templates.py     # ะัะพะผะฟัั ะดะปั GPT-4
โ   โ   โโโ queue_processor.py      # โ๏ธ ะฆะตะฝััะฐะปัะฝัะน ะพะฑัะฐะฑะพััะธะบ
โ   โ   โโโ telegram_bot.py         # ๐ฑ Telegram ะฑะพั
โ   โ   โโโ tracking_generator.py  # ะะตะฝะตัะฐัะธั ััะตะบ-ะฝะพะผะตัะพะฒ
โ   โโโ api/
โ       โโโ catalog.py              # API ะบะฐัะฐะปะพะณะฐ (ะฟะพัั 8025)
โ       โโโ orders.py               # API ะทะฐะบะฐะทะพะฒ (ัะพััะตั)
โ       โโโ dashboard.py            # Dashboard API (ะฟะพัั 8028)
โ       โโโ payments.py             # Payments API (ะฟะพัั 8029)
โ       โโโ webhooks.py             # Webhook ะฏะฝะดะตะบั.ะคะพัะผ (ะฟะพัั 8026)
โ       โโโ dashboard_frontend/     # SPA Dashboard (HTML + JS)
โ       โ   โโโ index.html
โ       โ   โโโ dashboard.js
โ       โโโ payment_frontend/       # ะกััะฐะฝะธัะฐ ะพะฟะปะฐัั (HTML)
โ           โโโ index.html
โโโ logs/                           # ะะพะณะธ (gitignored)
```

---

## ๐ ะัััััะน ััะฐัั

### ะขัะตะฑะพะฒะฐะฝะธั

- **Python** 3.11+
- **PostgreSQL** 14+
- **Redis** 7+
- **OpenAI API** ะบะปัั (ะธะปะธ ProxyAPI)
- Telegram Bot Token *(ะพะฟัะธะพะฝะฐะปัะฝะพ)*
- ะฏะฝะดะตะบั.ะะพััะฐ ั ะฟะฐัะพะปะตะผ ะฟัะธะปะพะถะตะฝะธั *(ะพะฟัะธะพะฝะฐะปัะฝะพ)*
- 1ะก:ะฃะะค ั HTTP Service *(ะพะฟัะธะพะฝะฐะปัะฝะพ)*

### ะจะฐะณ 1 โ ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน

```bash
# ะกะพะทะดะฐะฝะธะต ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั
python -m venv venv
venv\Scripts\activate          # Windows
# source venv/bin/activate     # Linux/Mac

# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
pip install -r requirements.txt
```

### ะจะฐะณ 2 โ ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั

```bash
# ะกะบะพะฟะธัะพะฒะฐัั ะฟัะธะผะตั ะบะพะฝัะธะณััะฐัะธะธ
cp env.example .env

# ะะฐะฟะพะปะฝะธัั .env ัะฒะพะธะผะธ ะดะฐะฝะฝัะผะธ:
# DATABASE_URL, REDIS_URL, OPENAI_API_KEY, TELEGRAM_BOT_TOKEN
```

ะะธะฝะธะผะฐะปัะฝัะน `.env` ะดะปั ะทะฐะฟััะบะฐ:
```env
DATABASE_URL=postgresql://postgres:password@localhost:5432/smartorder
REDIS_URL=redis://localhost:6379/0
OPENAI_API_KEY=sk-...
OPENAI_BASE_URL=https://api.proxyapi.ru/openai/v1

# Telegram (ะพะฟัะธะพะฝะฐะปัะฝะพ)
TELEGRAM_BOT_TOKEN=...

# ะฏะฝะดะตะบั.ะะพััะฐ (ะพะฟัะธะพะฝะฐะปัะฝะพ)
YANDEX_MAIL_EMAIL=your@yandex.ru
YANDEX_MAIL_PASSWORD=app_password_here
SMTP_USER=your@yandex.ru
SMTP_PASSWORD=app_password_here

# ะะพะผะฟะฐะฝะธั (ะดะปั PDF ััััะพะฒ)
COMPANY_NAME=ะะะ ะะฐัะฐ ะะพะผะฟะฐะฝะธั
COMPANY_INN=1234567890
```

### ะจะฐะณ 3 โ ะกะพะทะดะฐะฝะธะต ะฑะฐะทั ะดะฐะฝะฝัั

```bash
# ะกะพะทะดะฐัั ะะ
createdb smartorder

# ะัะธะผะตะฝะธัั ะผะธะณัะฐัะธะธ
psql -d smartorder -f database/migrations/001_schema.sql
psql -d smartorder -f database/migrations/002_indexes.sql
```

### ะจะฐะณ 4 โ ะะฐะฟััะบ

```bash
python start_all.py
```

### ะจะฐะณ 5 โ ะัะพะฒะตัะบะฐ

ะัะบัะพะนัะต ะฒ ะฑัะฐัะทะตัะต:

| ะกะตัะฒะธั | URL | ะงัะพ ะฟะพัะผะพััะตัั |
|--------|-----|----------------|
| ๐ Dashboard | http://localhost:8028 | ะะตะฝะตะดะถะตััะบะธะน ะธะฝัะตััะตะนั |
| ๐ API Docs | http://localhost:8025/docs | Swagger โ ะบะฐัะฐะปะพะณ ะธ ะทะฐะบะฐะทั |
| ๐ณ Payments | http://localhost:8029/docs | Swagger โ ะพะฟะปะฐัะฐ |
| โค๏ธ Health | http://localhost:8027/health | ะกัะฐััั ะพัะตัะตะดะฝะธะบะฐ |

---

## ๐ก ะกะตัะฒะธัั ะธ ะฟะพััั

| ะกะตัะฒะธั | ะะพัั | ะะฟะธัะฐะฝะธะต |
|--------|------|----------|
| Catalog + Orders API | **8025** | REST API ะบะฐัะฐะปะพะณะฐ ะธ ะทะฐะบะฐะทะพะฒ, Swagger |
| Yandex Forms Webhook | **8026** | ะัะธัะผ ะทะฐัะฒะพะบ ะธะท ะฏะฝะดะตะบั.ะคะพัะผ |
| Queue Processor | **8027** | ะะฑัะฐะฑะพััะธะบ ะพัะตัะตะดะธ (health check) |
| Dashboard | **8028** | ะะตะฑ-ะธะฝัะตััะตะนั ะผะตะฝะตะดะถะตัะฐ |
| Payments API | **8029** | ะกััะฐะฝะธัะฐ ะพะฟะปะฐัั ะธ payment gateway |

---

## โ๏ธ ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

### ะะฑัะทะฐัะตะปัะฝัะต

```env
DATABASE_URL=postgresql://user:pass@localhost:5432/smartorder
REDIS_URL=redis://localhost:6379/0
OPENAI_API_KEY=sk-...
```

### Telegram

```env
TELEGRAM_BOT_TOKEN=1234567890:ABCDEFabcdef...
TELEGRAM_ADMIN_ID=123456789
```

### ะฏะฝะดะตะบั.ะะพััะฐ

```env
YANDEX_MAIL_EMAIL=orders@company.yandex.ru
YANDEX_MAIL_PASSWORD=app_password
YANDEX_MAIL_POLL_INTERVAL=120
SMTP_USER=orders@company.yandex.ru
SMTP_PASSWORD=app_password
```

### 1ะก:ะฃะะค

```env
ONEC_BASE_URL=http://192.168.1.50/ะฃะะค
ONEC_USERNAME=admin
ONEC_PASSWORD=password
```

### ะะพะผะฟะฐะฝะธั (ะดะปั PDF ััััะพะฒ)

```env
COMPANY_NAME=ะะะ ะะฐัะฐ ะะพะผะฟะฐะฝะธั
COMPANY_INN=1234567890
COMPANY_ADDRESS=ะะพัะบะฒะฐ, ัะป. ะะตะฝะธะฝะฐ, ะด.1
COMPANY_PHONE=+74991234567
COMPANY_EMAIL=info@company.ru
```

### ะะปะฐััะถะฝะฐั ัะธััะตะผะฐ

```env
# ะัะฑะปะธัะฝัะน IP ะดะปั ัััะปะพะบ ะพะฟะปะฐัั (ะตัะปะธ ะฝะต ะทะฐะดะฐะฝ โ ะพะฟัะตะดะตะปัะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ)
APP_BASE_URL=http://192.168.1.100:8029
```

ะะพะปะฝัะน ัะฟะธัะพะบ โ ะฒ [`env.example`](env.example).

---

## ๐ก ะัะธะผะตัั ัะฐะฑะพัั ัะธััะตะผั

### ะกัะตะฝะฐัะธะน 1: ะะพะปะฝัะน ะทะฐะบะฐะท ัะตัะตะท Telegram

```
๐ค ะะปะธะตะฝั: "ะฅะพัั 2 ะฒะตะปะพัะธะฟะตะดะฐ ั ะดะพััะฐะฒะบะพะน ะฒ ะัะบัััะบ, ัะป. ะะตะฝะธะฝะฐ, ะด.5, 
            ะะฒะฐะฝ ะะตััะพะฒ, ัะตะปะตัะพะฝ 89991234567"

๐ค ะะพั: โ ะะฐั ะทะฐะบะฐะท ะฟัะธะฝัั!
         ะะฐะบะฐะท ORD-2026-0001
         โข ะะตะปะพัะธะฟะตะด ะณะพัะฝัะน Trek โ 2 ัั. ร 34 990 โฝ
         ะะพััะฐะฒะบะฐ: 500 โฝ
         ะัะพะณะพ: 70 480 โฝ
         [๐ณ ะะฟะปะฐัะธัั ะพะฝะปะฐะนะฝ]  โ ะบะฝะพะฟะบะฐ ั ัััะปะบะพะน ะฝะฐ ะพะฟะปะฐัั
         [PDF ัััั ะฟัะธะบัะตะฟะปัะฝ]

๐ณ ะะปะธะตะฝั ะพัะบััะฒะฐะตั ัััะปะบั, ะฒะฒะพะดะธั ัะตััะพะฒัั ะบะฐััั, ะฝะฐะถะธะผะฐะตั "ะะฟะปะฐัะธัั"

๐ค ะะพั: โ ะะฟะปะฐัะฐ ะฟัะพัะปะฐ ััะฟะตัะฝะพ!
         ะขัะตะบ-ะฝะพะผะตั: TRACK-20260219-123456
```

### ะกัะตะฝะฐัะธะน 2: ะะฐะบะฐะท ั ััะพัะฝะตะฝะธะตะผ ัะตัะตะท Email

```
๐ง ะะปะธะตะฝั ะฟะธัะตั: "ะัะถะฝะฐ ะฒะฐัะพัะฝะฐั ะฟะฐะฝะตะปั, ะดะพััะฐะฒะบะฐ ะฒ ะะพัะบะฒั"

๐ง ะกะธััะตะผะฐ ะพัะฒะตัะฐะตั: "ะฃัะพัะฝะธัะต, ะฟะพะถะฐะปัะนััะฐ:
                      1. ะะฐัะต ะคะะ
                      2. ะะพะผะตั ัะตะปะตัะพะฝะฐ
                      3. ะะพะปะฝัะน ะฐะดัะตั ะฒ ะะพัะบะฒะต"

๐ง ะะปะธะตะฝั ะพัะฒะตัะฐะตั: "ะะฐัะธั ะะฒะฐะฝะพะฒะฐ, +79991234567, ัะป. ะขะฒะตััะบะฐั, ะด.10, ะบะฒ.5"

๐ง ะกะธััะตะผะฐ: ะกััั ะฝะฐ ะพะฟะปะฐัั ORD-2026-0002 (HTML ะฟะธััะผะพ + PDF ะฒะปะพะถะตะฝะธะต)
             [ะะฝะพะฟะบะฐ: ะะฟะปะฐัะธัั ะพะฝะปะฐะนะฝ]
```

### ะกัะตะฝะฐัะธะน 3: ะะตั ัะพะฒะฐัะฐ ะฒ ะฝะฐะปะธัะธะธ

```
๐ค ะะปะธะตะฝั: "ะฅะพัั 100 ะฒะตะปะพัะธะฟะตะดะพะฒ"

๐ค ะะพั: "ะะตะปะพัะธะฟะตะด ะณะพัะฝัะน Trek โ ะฒ ะฝะฐะปะธัะธะธ ัะพะปัะบะพ 8 ัั.
          ะะพะดัะฒะตัะดะธัะต ะทะฐะบะฐะท ะฝะฐ 8 ัั. ะธะปะธ ััะพัะฝะธัะต ะบะพะปะธัะตััะฒะพ?"

๐ค ะะปะธะตะฝั: "ะะพะทัะผั 5"

๐ค ะะพั: โ ะะฐะบะฐะท ะฟะพะดัะฒะตัะถะดัะฝ ะฝะฐ 5 ะฒะตะปะพัะธะฟะตะดะพะฒ...
```

---

## ๐ Dashboard ะผะตะฝะตะดะถะตัะฐ

ะัะบัะพะนัะต **http://localhost:8028**:

- **๐ ะกัะฐัะธััะธะบะฐ** โ ะทะฐะบะฐะทั ะทะฐ ะดะตะฝั/ะฝะตะดะตะปั, ะฒััััะบะฐ, ะบะพะฝะฒะตััะธั, ััะตะดะฝะธะน ัะตะบ
- **๐ ะะฐะบะฐะทั** โ ัะฐะฑะปะธัะฐ ั ัะธะปัััะฐะผะธ, ะฟะพะธัะบะพะผ, ััะฐัััะฐะผะธ ะฝะฐ ััััะบะพะผ ัะทัะบะต
- **๐ง ะะตะนััะฒะธั** โ ัะบัะฟะพัั ะฒ 1ะก, ะณะตะฝะตัะฐัะธั ััะตะบ-ะฝะพะผะตัะฐ, ัะผะตะฝะฐ ััะฐัััะฐ
- **๐ฆ ะะฐัะฐะปะพะณ** โ ัะพะฒะฐัั ั ะพััะฐัะบะฐะผะธ ะธะท 1ะก
- **๐พ ะญะบัะฟะพัั** โ ัะบะฐัะฐัั ะทะฐะบะฐะทั ะฒ Excel ะธะปะธ CSV

---

## ๐ ะะพะณะธะบะฐ ััะพัะฝัััะธั ะฒะพะฟัะพัะพะฒ

| ะกะธััะฐัะธั | ะะตะนััะฒะธะต ัะธััะตะผั |
|----------|-----------------|
| ะะตั ะคะะ ะธะปะธ ัะตะปะตัะพะฝะฐ | ะกะฟัะฐัะธะฒะฐะตั ัะตัะตะท Telegram/Email |
| ะะตะฟะพะปะฝัะน ะฐะดัะตั (ัะพะปัะบะพ ะณะพัะพะด) | ะะฐะฟัะฐัะธะฒะฐะตั ัะปะธัั, ะดะพะผ, ะบะฒะฐััะธัั |
| ะขะพะฒะฐั ะฝะต ะฝะฐะนะดะตะฝ ะฒ ะบะฐัะฐะปะพะณะต | ะกะพะพะฑัะฐะตั ะธ ะฟัะพัะธั ััะพัะฝะธัั |
| ะขะพะฒะฐัะฐ ะฝะตะดะพััะฐัะพัะฝะพ ะฝะฐ ัะบะปะฐะดะต | ะัะตะดะปะฐะณะฐะตั ะดะพัััะฟะฝะพะต ะบะพะปะธัะตััะฒะพ |
| ะะปะธะตะฝั ะผะตะฝัะตั ัะพััะฐะฒ ะฒ ะพัะฒะตัะต | ะะฑะฝะพะฒะปัะตั ัะพั ะถะต ะทะฐะบะฐะท (ะดัะฑะปะตะน ะฝะตั!) |

ะะพะฝัะตะบัั ัะพััะฐะฝัะตััั ะฒ **Redis** โ ะพัะฒะตั ะบะปะธะตะฝัะฐ ะฒัะตะณะดะฐ ะพะฑะฝะพะฒะปัะตั **ัััะตััะฒัััะธะน ะทะฐะบะฐะท**.

---

## ๐๏ธ ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

| ะะพะผะฟะพะฝะตะฝั | ะขะตัะฝะพะปะพะณะธั | ะะตััะธั |
|-----------|-----------|--------|
| Backend | Python + FastAPI + Uvicorn | 3.11+ / 0.104+ |
| ะะฐะทะฐ ะดะฐะฝะฝัั | PostgreSQL + psycopg2 | 14+ |
| ะัะตัะตะดั | Redis | 7+ |
| AI | OpenAI GPT-4.1-mini | gpt-4.1-mini |
| Telegram | python-telegram-bot | 20.7 |
| Email | imaplib + smtplib (ะฏะฝะดะตะบั.ะะพััะฐ) | stdlib |
| PDF | reportlab | 4.0+ |
| Fuzzy search | rapidfuzz | 3.6+ |
| 1ะก ะธะฝัะตะณัะฐัะธั | HTTP POST (requests) | โ |
| Scheduler | APScheduler | 3.10+ |
| Frontend | HTML + Tailwind CSS + JS | CDN |
| Data validation | Pydantic v2 | 2.5+ |
| Rate limiting | slowapi | 0.1.9 |

---

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- **ะกะตะบัะตัั** โ ัะพะปัะบะพ ัะตัะตะท `.env` (ะธัะบะปัััะฝ ะธะท git)
- **ะะปะฐััะถะฝัะต ัะพะบะตะฝั** โ ะพะดะฝะพัะฐะทะพะฒัะต UUID, TTL 24 ัะฐัะฐ ะฒ Redis
- **ะะฐะปะธะดะฐัะธั** โ ะฒัะต ะฒัะพะดััะธะต ะดะฐะฝะฝัะต ะฟัะพะฒะตัััััั ัะตัะตะท Pydantic
- **Rate Limiting** โ ะพะณัะฐะฝะธัะตะฝะธะต ะทะฐะฟัะพัะพะฒ ะบ API
- **CORS** โ ะฝะฐัััะพะตะฝ ะฝะฐ Payments API

---

## ๐ ะะพะบัะผะตะฝัะฐัะธั

| ะะพะบัะผะตะฝั | ะะฟะธัะฐะฝะธะต |
|----------|----------|
| [`Homework/ะขะตัะฝะธัะตัะบะพะต ะทะฐะดะฐะฝะธะต.md`](Homework/ะขะตัะฝะธัะตัะบะพะต%20ะทะฐะดะฐะฝะธะต.md) | ะขะ ะฟัะพะตะบัะฐ |
| [`Homework/API ะะพะบัะผะตะฝัะฐัะธั.md`](Homework/API%20ะะพะบัะผะตะฝัะฐัะธั.md) | ะะพะปะฝัะน ัะฟัะฐะฒะพัะฝะธะบ API |
| [`Homework/ะะธะฑะปะธะพัะตะบะฐ ะฟัะพะผะฟัะพะฒ.md`](Homework/ะะธะฑะปะธะพัะตะบะฐ%20ะฟัะพะผะฟัะพะฒ.md) | ะัะพะผะฟัั ะดะปั ัะพะทะดะฐะฝะธั ะฟัะพะตะบัะฐ ะฒ Cursor AI |
| `http://localhost:8025/docs` | Swagger โ Catalog + Orders API |
| `http://localhost:8028/docs` | Swagger โ Dashboard API |
| `http://localhost:8029/docs` | Swagger โ Payments API |

---

## ๐ ะ ะฟัะพะตะบัะต

**SmartOrder Engine** โ ะฒัะฟััะบะฝะพะน ะฟัะพะตะบั ะฟัะพะณัะฐะผะผั **ยซะัะพัะตััะธั ะะฐะนะฑ-ะะพะดะตัยป** ะฒ ะฃะฝะธะฒะตััะธัะตัะต ะะตัะพะบะพะดะตั.

**ะะฒัะพั:** ะัะผะฐัะตะฒ ะ.ะ.  
**ะะพะด:** 2026

ะัะพะตะบั ะดะตะผะพะฝัััะธััะตั ัะพะทะดะฐะฝะธะต ัะตะฐะปัะฝะพะณะพ production-ready MVP ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ:
- ะกะพะฒัะตะผะตะฝะฝะพะณะพ Python-ััะตะบะฐ (FastAPI, async, Pydantic v2)
- AI-ะธะฝัะตะณัะฐัะธะธ (OpenAI GPT-4)
- ะะธะบัะพัะตัะฒะธัะฝะพะน ะฐััะธัะตะบัััั
- ะะฐะฑะพัั ั ะพัะตัะตะดัะผะธ (Redis)
- ะะฝัะตะณัะฐัะธะธ ั ะบะพัะฟะพัะฐัะธะฒะฝัะผะธ ัะธััะตะผะฐะผะธ (1ะก:ะฃะะค)
- ะะผะฝะธะบะฐะฝะฐะปัะฝะพััะธ (Telegram + Email)
- ะะพะปะฝะพัััั ััะฝะบัะธะพะฝะฐะปัะฝะพะน ะฟะปะฐััะถะฝะพะน ัััะฐะฝะธัั
